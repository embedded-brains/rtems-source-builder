%include tools/rtems-gcc-12-newlib-head.cfg

%define xilinx_github_url https://raw.githubusercontent.com/Xilinx/meta-xilinx

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0001-LOCAL-Testsuite-builtins-tests-require-fpic.patch
%hash sha512 0001-LOCAL-Testsuite-builtins-tests-require-fpic.patch \
       f4c711a488abe1ca6330a0a60213b3fc1743e3d306c265315239d86402ac8f4fde069b050452cc618e7e5548c4528c7819f38641881d81faa0af7de3192bc24b

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0002-LOCAL-Quick-fail-g-.dg-opt-memcpy1.C.patch
%hash sha512 0002-LOCAL-Quick-fail-g-.dg-opt-memcpy1.C.patch \
       f18caa3d3bbc1d44eaba33ee95d1d742249745d1c3b9f46e5a2492e2d3dbbd7434f0150a7067cc6dfd0e2165f0d1995e866dea4329448ca7f12e1030a470580a

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0003-LOCAL-For-dejagnu-static-testing-on-qemu-suppress-wa.patch
%hash sha512 0003-LOCAL-For-dejagnu-static-testing-on-qemu-suppress-wa.patch \
       b424724f69abcf7c3bcd685edc82866df4d5d7667e068311ee1dd3bfe3400e540cbd8a67b9aa8c69abb4ef9297fbe3bdd9526de47dd265b06b3ae5a7005a811d

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0004-Patch-testsuite-Add-MicroBlaze-to-target-supports-fo.patch
%hash sha512 0004-Patch-testsuite-Add-MicroBlaze-to-target-supports-fo.patch \
       b7e5ff18b84a320e7a4b4504e8209231354276d1246e74c5f1468cb20b0d4b59af25573652063ce96f5955b626e9c28dcaaa52b411c25eab9c03c45287d146c6

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0005-Patch-testsuite-Update-MicroBlaze-strings-test.patch
%hash sha512 0005-Patch-testsuite-Update-MicroBlaze-strings-test.patch \
       23ca04a2e16c2b32c9baab14d388e6e74c057313fa0064f2d44eb8df5a0f74c8a0529ec159de3962924dd1a227885e6f413b005b72c766b945be1f8e6708fb10

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0006-Patch-testsuite-Allow-MicroBlaze-.weakext-pattern-in.patch
%hash sha512 0006-Patch-testsuite-Allow-MicroBlaze-.weakext-pattern-in.patch \
       9ef4108d8ab54377b5579dd835cb5d248e6fe3778335a795865e7ec83428cda31286a81f0a9669460f13cf759c6f66615493fef00b44802480c70abe4646a5bf

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0007-Patch-testsuite-Add-MicroBlaze-to-check_profiling_av.patch
%hash sha512 0007-Patch-testsuite-Add-MicroBlaze-to-check_profiling_av.patch \
       dfb1101f59ef20757f9a16c4235ecb3af3a7f1929f8d714e9835057d2fae88b88c5ad873c3eb2bc6ff67c94e6fb01e0ac0c4be1eea2493ed70962fe712717d75

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0008-Patch-microblaze-Fix-atomic-side-effects.patch
%hash sha512 0008-Patch-microblaze-Fix-atomic-side-effects.patch \
       676edf672931df8cfe954750221de9ec272fffd8b1f17e0a2e3316b6f3cc6d4503aad9db10781a4555296ba94a44447ea251ef23e389e325607a29ac5d3d38e3

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0009-Patch-microblaze-Fix-atomic-boolean-return-value.patch
%hash sha512 0009-Patch-microblaze-Fix-atomic-boolean-return-value.patch \
       acbe070096c44976c0c8add4b5a3577494f475e6d65eecfc92e9fe300bc233f44319acd837b6f4f50cd760898a5e533ddca19fd8deaf147881ae6626bdf9bea2

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0010-Patch-microblaze-Fix-the-Microblaze-crash-with-msmal.patch
%hash sha512 0010-Patch-microblaze-Fix-the-Microblaze-crash-with-msmal.patch \
       7ab88f74bc86935d99a3bb05f256db1ddfff2a1693da6b890bc9e521421011cde70c5ed057e51e39447c260f0bf4b95da6ebfdefc248270710a73000307071fc

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0011-Patch-microblaze-Added-ashrsi3_with_size_opt.patch
%hash sha512 0011-Patch-microblaze-Added-ashrsi3_with_size_opt.patch \
       0f0f37464f956e991247af32eee6384e9c7e7e72d97646e48af0e3289c5ff5d9b08b1ab588dae5f71860ad439cd6b35e5064b28774986d3284a2dc2ba90a21c0

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0012-Patch-microblaze-Use-bralid-for-profiler-calls.patch
%hash sha512 0012-Patch-microblaze-Use-bralid-for-profiler-calls.patch \
       d7c61baaa77416c306215716344e703bd8687251bc921e071e4ae7ba06a6275a25201723070f4352bbfb1522aa430482781e0bde7edd728b460e590577bcabf4

%patch add gcc -p1 %{xilinx_github_url}/xlnx-rel-v2024.1/meta-microblaze/recipes-devtools/gcc/gcc-12/0013-Patch-microblaze-Removed-moddi3-routinue.patch
%hash sha512 0013-Patch-microblaze-Removed-moddi3-routinue.patch \
       87dec1566f3e2e539d3a97fea4306f50e95e318da0d2c3f28d8db106efd71cb46ca825c79c86fd3a9d6ff08380a6414a2a65c05e09395da1f44f4aecee37f27b

%patch add gcc -p1 https://gitlab.rtems.org/rtems/rtos/rtems/-/blob/main/assets/tracmigration/ticket_attachments/0001-gcc-config-aarch64-rtems.h-Define-__USE_INIT_FINI__.patch
%hash sha512 0001-gcc-config-aarch64-rtems.h-Define-__USE_INIT_FINI__.patch \
       84253c3c180fbfc6b640ffda72e8574f95661bdf3132503acc3f1b73a8f78aeb0508c06dbb32d1c8363ff083765194eeff14e46445946969c51a4498d2b3a0e7

%patch add gcc -p1 https://gitlab.rtems.org/rtems/rtos/rtems/-/blob/main/assets/tracmigration/ticket_attachments/0002-config-microblaze-crti.S-Add-single-underscore-init-.patch
%hash sha512 0002-config-microblaze-crti.S-Add-single-underscore-init-.patch \
       bf1ec7eff0dd51d154dd0507edb085458c90a000f5a3ccefb1064147cf8fdafe0111d2094372e164976f2193c289bff9ea63dcad43555c90893272a494b7e779

%patch add gcc -p1 https://gitlab.rtems.org/rtems/rtos/rtems/-/blob/main/assets/tracmigration/ticket_attachments/0001-microblaze-Define-__ELF__-for-RTEMS-target.patch
%hash sha512 0001-microblaze-Define-__ELF__-for-RTEMS-target.patch \
       39c0666c2e5c560447f00ed913cd07261e9c0db05b0cc549400667013ccf1d4140c0bd7b012d60dd628235bf7ae27564460a45e969e9cff75d14ed94bfd82632
